
# See LICENSE for license details.

# This file is automatically generated. Do not edit.

#*****************************************************************************
# isa/rv64uv/vfadd_vf_LMUL1SEW32VL4.S
#-----------------------------------------------------------------------------
#
# Test vfadd.vf instructions.
# With LMUL=1, SEW=32, VL=4
#

#include "riscv_test.h"
#include "test_macros.h"

RVTEST_RV64UV

RVTEST_CODE_BEGIN

  la a1, tdat
  la a3, sres
  lwu a4, 0(a1)
  li a5, 1065353216
  fmv.w.x f1, a4
  fmv.w.x f2, a5
  fadd.s f2, f1, f2
  fmv.x.w a5, f2
  sw a5, 0(a3)
  lwu a4, 4(a1)
  li a5, 1065353216
  fmv.w.x f1, a4
  fmv.w.x f2, a5
  fadd.s f2, f1, f2
  fmv.x.w a5, f2
  sw a5, 4(a3)
  lwu a4, 8(a1)
  li a5, 1065353216
  fmv.w.x f1, a4
  fmv.w.x f2, a5
  fadd.s f2, f1, f2
  fmv.x.w a5, f2
  sw a5, 8(a3)
  lwu a4, 12(a1)
  li a5, 1065353216
  fmv.w.x f1, a4
  fmv.w.x f2, a5
  fadd.s f2, f1, f2
  fmv.x.w a5, f2
  sw a5, 12(a3)


  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a2, tdat
  vle32.v v2, (a2)
  vle32.v v1, (a2)

  
  li t0, 4
  vsetvli t1, t0, e32,m1,ta,ma
  li t2, 1065353216
  fmv.w.x f2, t2
  vfadd.vf v1, v2, f2

  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a1, res
  vse32.v v1, (a1)
  la a2, sres

  TEST_CASE_REG(3, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(4, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)

  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a2, tdat
  vle32.v v2, (a2)
  vle32.v v1, (a2)

  
  li t0, -1
  vsetvli t1, t0, e8,m1,ta,ma
  la a3, mask
  vle8.v v0, (a3)

  li t0, 4
  vsetvli t1, t0, e32,m1,ta,ma
  li t2, 1065353216
  fmv.w.x f2, t2
  vfadd.vf v1, v2, f2, v0.t

  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a1, res
  vse32.v v1, (a1)
  la a2, sres

  TEST_CASE_REG(5, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(6, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(7, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(8, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  addi a1, a1, 1; addi a2, a2, 1;
  addi a1, a1, 1; addi a2, a2, 1;
  addi a1, a1, 1; addi a2, a2, 1;
  addi a1, a1, 1; addi a2, a2, 1;
  TEST_CASE_REG(9, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(10, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(11, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(12, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  addi a1, a1, 1; addi a2, a2, 1;
  addi a1, a1, 1; addi a2, a2, 1;
  addi a1, a1, 1; addi a2, a2, 1;
  addi a1, a1, 1; addi a2, a2, 1;

  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a2, tdat
  vle32.v v2, (a2)
  vle32.v v1, (a2)

  
  li t0, 4
  vsetvli t1, t0, e32,m1,tu,ma
  li t2, 1065353216
  fmv.w.x f2, t2
  vfadd.vf v1, v2, f2

  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a1, res
  vse32.v v1, (a1)
  la a2, sres

  TEST_CASE_REG(13, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(14, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)

  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a2, tdat
  vle32.v v2, (a2)
  vle32.v v1, (a2)

  
  li t0, -1
  vsetvli t1, t0, e8,m1,ta,ma
  la a3, mask
  vle8.v v0, (a3)

  li t0, 4
  vsetvli t1, t0, e32,m1,ta,ma
  li t2, 1065353216
  fmv.w.x f2, t2
  vfadd.vf v1, v2, f2, v0.t

  li t0, -1
  vsetvli t1, t0, e32,m1,ta,ma
  la a1, res
  vse32.v v1, (a1)
  la a2, sres

  TEST_CASE_REG(15, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(16, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(17, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(18, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(19, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(20, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(21, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(22, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(23, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(24, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(25, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE_REG(26, t0, t1, lbu t0, 0(a1); lbu t1, 0(a2); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(27, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(28, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(29, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)
  TEST_CASE(30, t0, 0x0, lbu t0, 0(a1); addi a1, a1, 1; addi a2, a2, 1)

  TEST_PASSFAIL

RVTEST_CODE_END

  .data
RVTEST_DATA_BEGIN

res:
  .zero 40

sres:
  .zero 40

tdat:
  .quad 0x1
  .quad 0x1
  .quad 0x3fffffff8
  .quad 0x700000000
  .quad 0xffffffffefffffff

mask:
  .quad 0x5555555555555555
  .quad 0x5555555555555555
  .quad 0x5555555555555555
  .quad 0x5555555555555555

RVTEST_DATA_END
