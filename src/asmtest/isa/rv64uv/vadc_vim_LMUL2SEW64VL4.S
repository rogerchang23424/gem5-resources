
# See LICENSE for license details.

# This file is automatically generated. Do not edit.

#*****************************************************************************
# isa/rv64uv/vadc_vim_LMUL2SEW64VL4.S
#-----------------------------------------------------------------------------
#
# Test vadc.vim instructions.
# With LMUL=2, SEW=64, VL=4
#

#include "riscv_test.h"
#include "test_macros.h"

RVTEST_RV64UV

RVTEST_CODE_BEGIN

  la a1, tdat
  la a3, sres
  ld a4, 0(a1)
  li a5, 1
  add a5, a4, a5
  addi a5, a5, 1
  sd a5, 0(a3)
  ld a4, 8(a1)
  li a5, 1
  add a5, a4, a5
  sd a5, 8(a3)
  ld a4, 16(a1)
  li a5, 1
  add a5, a4, a5
  addi a5, a5, 1
  sd a5, 16(a3)
  ld a4, 24(a1)
  li a5, 1
  add a5, a4, a5
  sd a5, 24(a3)


  li t0, -1
  vsetvli t1, t0, e64,m2,ta,ma
  la a2, tdat
  vle64.v v4, (a2)
  vle64.v v2, (a2)

  
  li t0, -1
  vsetvli t1, t0, e8,m1,ta,ma
  la a3, mask
  vle8.v v0, (a3)

  li t0, 4
  vsetvli t1, t0, e64,m2,ta,ma
  vadc.vim v2, v4, 1, v0

  li t0, -1
  vsetvli t1, t0, e64,m2,ta,ma
  la a1, res
  vse64.v v2, (a1)
  la a2, sres

  TEST_CASE_REG(3, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(4, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(5, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(6, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)



  li t0, -1
  vsetvli t1, t0, e64,m2,ta,ma
  la a2, tdat
  vle64.v v4, (a2)
  vle64.v v2, (a2)

  
  li t0, -1
  vsetvli t1, t0, e8,m1,ta,ma
  la a3, mask
  vle8.v v0, (a3)

  li t0, 4
  vsetvli t1, t0, e64,m2,tu,ma
  vadc.vim v2, v4, 1, v0

  li t0, -1
  vsetvli t1, t0, e64,m2,ta,ma
  la a1, res
  vse64.v v2, (a1)
  la a2, sres

  TEST_CASE_REG(7, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(8, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(9, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)
  TEST_CASE_REG(10, t0, t1, ld t0, 0(a1); ld t1, 0(a2); addi a1, a1, 8; addi a2, a2, 8)



  TEST_PASSFAIL

RVTEST_CODE_END

  .data
RVTEST_DATA_BEGIN

res:
  .zero 72

sres:
  .zero 72

tdat:
  .quad 0x0
  .quad 0x0
  .quad 0x1
  .quad 0x1
  .quad 0x3
  .quad 0x7
  .quad 0xfffffffffffffff8
  .quad 0x0
  .quad 0xffffffffffffffff

mask:
  .quad 0x5555555555555555
  .quad 0x5555555555555555
  .quad 0x5555555555555555
  .quad 0x5555555555555555

RVTEST_DATA_END
